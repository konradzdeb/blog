---
title: Installing Hortonworks Sanbox on Mac with Docker
author: Konrad
date: '2019-02-23'
slug: installing-hortonworks-sanbox-deployment-hdp-on-docker-mac
categories:
  - how-to
tags:
  - docker
  - bash
---

# Background

The post covers installation of Hortonworks Sandbox (HD) on Mac using Docker. In software development, *sandbox* describes a testing environment that can be used to isolate untested code changes from a production code. Hortonworks Sandbox provides such an environment with the Hortonworks Data Platform installed. Hortonworks Data Platform is an open source framework facilitating distributed storage and processing large volumes of data.

Deploying system for distributed processing *within* a single computer may seem like a counter-intuitive idea but it's actually a very common practice. Most frequent use cases involve various learning / professional development activities where one may be interested in learning new technology or simply exploring available interfaces. Other frequent use case pertains to various demos, where there may be a need to demonstrate product capabilities and accessing proper, production environment could be cumbersome.

## Installation

### Docker

Docker, which is now used by millions of developers, is and open platform for developing, shipping and running applications. More technically, Docker uses OS-level virtualisation to deliver software packages called containers. Before installing docker let's check for the existing installation.

```{sh docker_check, echo=TRUE, eval=FALSE}
which -a docker
# /usr/local/bin/docker
docker -v
# Docker version 20.10.2, build 2291f61
```

Assuming that the line above did not produce results we can install docker with use of Homebrew. To install Homebrew:

```{sh brew_install, eval=FALSE, echo=TRUE}
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

We can the progress with installing docker. The command will install 'cask' version of the Docker. In Homebrew lingo, 'casks' are applications with Graphical User Interfaces. It is possible to install Docker without GUI by running `brew install docker`.

```{sh docker_install, eval=FALSE, echo=TRUE}
brew install --cask docker
```

By choosing the `--cask` option we will choose instruct homebrew to install Docker with the additional application providing us with a convenient GUI for managing settings and images. With respect to the configuration, we have to increase the dedicated memory of the Docker images to at least 12GB. This can be quickly achieved by modification of the setting below.

![Docker Memory Configuration](images/DockerConfigMem.png){width=80% height=80%}

### Sanbox

Cloudera maintains installation script, which presently the script can be download from [here](https://www.cloudera.com/downloads/hortonworks-sandbox/hdp.html?utm_source=mktg-tutorial). After downloading the sandbox can be installed using the following command:

```{sh hdp_install, eval=FALSE, echo=TRUE}
sh --verbose ./docker-deploy-{Version}.sh
```

Where `{Version}` stands for the version of the sandbox we are going to install. After the deployment script finishes successfully, we will be able to notice that the new docker images are now running. That can be checked by running `docker ps` command or by exploring the Docker GUI, as shown below.

*Insert docker running*

It's worth adding that the installed image is rather substantial, exceeding 27GB:

```{sh docker_image_size, eval=FALSE, echo=TRUE}
docker images | grep horton | awk '{ print $1, $7 }'
# hortonworks/sandbox-hdp 27.5GB
# hortonworks/sandbox-proxy 109MB
```

#### Host file

In order to access the Sandbox we have modify the host file^[[The article](https://www.cloudera.com/tutorials/learning-the-ropes-of-the-hdp-sandbox.html) explaining the process in detail is provided by Cloudera.] We can do this using the code below:

```{sh modify_hosts, eval=FALSE, echo=TRUE}
echo '127.0.0.1 sandbox-hdp.hortonworks.com sandbox-hdf.hortonworks.com' | sudo tee -a /private/etc/hosts
```
## Usage 

### Start/Stop

The sandbox can be controlled in a manner similar to other docker images

```{sh start_stop, eval=FALSE, echo=TRUE}
docker [start|stop] sandbox-hdp
docker [start|stop] sandbox-proxy
```

### Accessing the sandbox

Following the successful modification of the command above we can start interacting with the box. Opening a ssh connection to the snadbox can be achieved by executing

```{sh connect_box, eval=FALSE, echo=TRUE}
ssh maria_dev@sandbox-hdp.hortonworks.com -p 2222
```

The list of pre-configured user accounts and passwords is provided by [Cloudera](https://www.cloudera.com/tutorials/learning-the-ropes-of-the-hdp-sandbox.html).


